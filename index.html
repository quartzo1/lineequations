<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Point-on-Line — MCQ Quiz (Standalone)</title>
<style>
  :root { --bg:#0c1117; --panel:#111827; --card:#0f1721; --ink:#e8eef7; --muted:#9fb0c3; --ok:#18c29c; --no:#ff6b6b; --accent:#4aa8ff; }
  * { box-sizing: border-box; }
  body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial; background: var(--bg); color: var(--ink); }
  header { padding: 22px 18px; text-align: center; background: linear-gradient(180deg,#0f1826,#0b1220); border-bottom: 1px solid #1f2a3a; }
  h1 { margin: 0 0 6px; font-weight: 800; letter-spacing: .2px; }
  .sub { margin: 0; color: var(--muted); }
  .wrap { max-width: 900px; margin: 0 auto; padding: 18px; }
  .card { background: linear-gradient(180deg,#121a26, var(--card)); border: 1px solid #223248; border-radius: 14px; padding: 16px; margin: 14px 0; }
  .qhead { display:flex; flex-wrap:wrap; gap:8px 18px; align-items:baseline; }
  .eq { font-weight: 800; }
  .pt { color: var(--muted); }
  .choices { margin-top: 10px; display:grid; gap:8px; }
  label.choice { display:flex; gap:8px; align-items:center; padding:8px 10px; border:1px solid #223248; border-radius:10px; cursor:pointer; background:#0b121a; }
  input[type="radio"] { transform: scale(1.05); }
  .post { margin-top: 10px; display:flex; gap:8px; align-items:center; }
  select.revealSel { background:#0b121a; color:var(--ink); border:1px solid #274368; padding:8px 10px; border-radius:10px; min-width:190px; }
  select.revealSel:disabled { opacity:.55; cursor:not-allowed; }
  .answerBox { margin-top: 10px; padding:10px; border:1px dashed #2a3c58; border-radius:10px; display:none; }
  .answerOnly { font-weight:800; color:var(--ok); }
  .explain { margin-top:6px; color:var(--muted); }
  .badge { display:inline-block; margin-left:auto; padding:3px 8px; border-radius:999px; font-size:12px; font-weight:800; border:1px solid transparent; }
  .bCorrect { color: var(--ok); border-color: rgba(24,194,156,.35); background: rgba(24,194,156,.12); }
  .bWrong { color: var(--no); border-color: rgba(255,107,107,.35); background: rgba(255,107,107,.12); }
  .actions { position: sticky; bottom: 0; padding: 14px 18px; background: linear-gradient(180deg, rgba(12,17,23,.0), rgba(12,17,23,.95) 40%, rgba(12,17,23,1)); border-top:1px solid #1f2a3a; display:flex; gap:10px; justify-content:center; }
  button { border:1px solid #274368; background: linear-gradient(180deg,#153152,#0f2440); color:#eaf2ff; padding:12px 16px; border-radius:12px; font-weight:700; cursor:pointer; }
  button:hover { filter:brightness(1.08); }
  .ghost { background:transparent; }
  .score { text-align:center; font-weight:800; margin-top: 6px; }
  code { background:#0b121a; padding:2px 6px; border-radius:6px; border:1px solid #223248; }
</style>
</head>
<body>
<header>
  <h1>Point-on-Line — Multiple Choice</h1>
  <p class="sub">Answer all questions, click <strong>Submit Quiz</strong> once, then use each question’s dropdown to reveal the answer or answer + explanation.</p>
</header>

<div class="wrap" id="app"></div>

<div class="actions">
  <button id="submitBtn">Submit Quiz</button>
  <button class="ghost" id="resetBtn">Reset</button>
</div>

<script>
/* ================== DATA ================== */
/*
  Each question object:
  {
    id, type: "slope" | "horizontal" | "vertical",
    m, b, k (for y=k), x0 (for x = x0),
    x, y (point),
    choices: ["Yes","No"]   // MC options
  }
*/
const QUESTIONS = [
  // y = 2x + 3 ; (4, 11) -> 11 = 2*4+3 = 11 ✓
  { id: 1, type: "slope", m: 2, b: 3, x: 4, y: 11, choices: ["Yes","No"] },
  // y = -x + 5 ; (2, 4) -> RHS = 3 ≠ 4 ✗
  { id: 2, type: "slope", m: -1, b: 5, x: 2, y: 4, choices: ["Yes","No"] },
  // y = 0.5x - 1 ; (6, 2) -> RHS = 2 ✓
  { id: 3, type: "slope", m: 0.5, b: -1, x: 6, y: 2, choices: ["Yes","No"] },
  // y = 3x ; (1, 4) -> RHS = 3 ≠ 4 ✗
  { id: 4, type: "slope", m: 3, b: 0, x: 1, y: 4, choices: ["Yes","No"] },
  // y = -2x + 8 ; (3, 2) -> RHS = 2 ✓
  { id: 5, type: "slope", m: -2, b: 8, x: 3, y: 2, choices: ["Yes","No"] },
  // x = 5 ; (5, anything) ✓ here (5, -1) ✓
  { id: 6, type: "vertical", x0: 5, x: 5, y: -1, choices: ["Yes","No"] }
];

/* ============ HELPERS / MATH ============ */
const fmt = n => Number.isInteger(n) ? String(n) : String(n).replace(/\.0+$/, "");
const coeffToStr = (c, sym) => c===1 ? sym : c===-1 ? "-" + sym : fmt(c) + sym;
function eqToString(q) {
  if (q.type === "horizontal") return `y = ${fmt(q.k)}`;
  if (q.type === "vertical")   return `x = ${fmt(q.x0)}`;
  // slope-intercept
  const mS = q.m===0 ? "0" : coeffToStr(q.m,"x");
  const bS = q.b ? (q.b>0 ? ` + ${fmt(q.b)}` : ` - ${fmt(Math.abs(q.b))}`) : "";
  return `y = ${mS}${q.m===0? (q.b? bS.replace(/^\s\+\s/,"") : "") : bS}`;
}
function correctAnswer(q){
  let on=false;
  if(q.type==="slope"){
    on = Math.abs(q.y - (q.m*q.x + q.b)) < 1e-9;
  } else if(q.type==="horizontal"){
    on = Math.abs(q.y - q.k) < 1e-9;
  } else if(q.type==="vertical"){
    on = Math.abs(q.x - q.x0) < 1e-9;
  }
  return on ? "Yes" : "No";
}
function explanation(q){
  if(q.type==="horizontal"){
    return `Line is y = ${fmt(q.k)}. Point’s y = ${fmt(q.y)} → ${fmt(q.y)} ${q.y===q.k ? "=":"≠"} ${fmt(q.k)}.`;
  }
  if(q.type==="vertical"){
    return `Line is x = ${fmt(q.x0)}. Point’s x = ${fmt(q.x)} → ${fmt(q.x)} ${q.x===q.x0 ? "=":"≠"} ${fmt(q.x0)}.`;
  }
  const rhs = q.m*q.x + q.b;
  const mS = fmt(q.m), xS = fmt(q.x), bS = (q.b>=0?"+":"-")+" "+fmt(Math.abs(q.b));
  return `Compute m·x + b = ${mS}·${xS} ${bS} = ${fmt(rhs)}. Compare with point’s y = ${fmt(q.y)} → ${fmt(q.y)} ${Math.abs(q.y-rhs)<1e-9 ? "=":"≠"} ${fmt(rhs)}.`;
}

/* ============== RENDER UI ============== */
const app = document.getElementById("app");

QUESTIONS.forEach((q, idx) => {
  const card = document.createElement("div");
  card.className = "card";
  card.id = `q-${q.id}`;
  const eqText = eqToString(q);

  // Build choices
  const choicesHTML = q.choices.map((c,i)=>`
    <label class="choice">
      <input type="radio" name="q_${q.id}" value="${c}" aria-label="${c}">
      <span>${String.fromCharCode(65+i)}.</span> <span>${c}</span>
    </label>
  `).join("");

  card.innerHTML = `
    <div class="qhead">
      <div class="eq">Q${idx+1}. Line: <code>${eqText}</code></div>
      <div class="pt">Point: (${fmt(q.x)}, ${fmt(q.y)})</div>
      <span class="badge" id="badge-${q.id}" style="display:none;"></span>
    </div>
    <div class="choices" role="radiogroup" aria-labelledby="q-${q.id}-label">
      ${choicesHTML}
    </div>
    <div class="post">
      <label for="reveal-${q.id}">Reveal:</label>
      <select id="reveal-${q.id}" class="revealSel" disabled>
        <option value="hidden">Hidden</option>
        <option value="ans">Answer only</option>
        <option value="ansx">Answer + explanation</option>
      </select>
    </div>
    <div class="answerBox" id="abox-${q.id}">
      <div class="answerOnly" id="ans-${q.id}"></div>
      <div class="explain" id="exp-${q.id}"></div>
    </div>
  `;
  app.appendChild(card);

  // Hook up the reveal select
  const sel = card.querySelector(`#reveal-${q.id}`);
  sel.addEventListener("change", () => {
    const box = card.querySelector(`#abox-${q.id}`);
    const ansEl = card.querySelector(`#ans-${q.id}`);
    const expEl = card.querySelector(`#exp-${q.id}`);
    if (sel.value === "hidden") {
      box.style.display = "none";
      return;
    }
    ansEl.textContent = `Correct answer: ${correctAnswer(q)}`;
    expEl.textContent = sel.value === "ansx" ? explanation(q) : "";
    box.style.display = "block";
  });
});

/* ============== SUBMIT / RESET ============== */
document.getElementById("submitBtn").addEventListener("click", () => {
  let correct = 0;

  QUESTIONS.forEach(q => {
    const chosen = (document.querySelector(`input[name="q_${q.id}"]:checked`) || {}).value;
    const truth = correctAnswer(q);
    const badge = document.getElementById(`badge-${q.id}`);
    const reveal = document.getElementById(`reveal-${q.id}`);

    if (!chosen) {
      badge.style.display = "inline-block";
      badge.className = "badge bWrong";
      badge.textContent = "No choice";
      reveal.disabled = false; // still allow reveal after submit
      return;
    }

    const ok = (chosen === truth);
    if (ok) correct++;

    badge.style.display = "inline-block";
    badge.className = "badge " + (ok ? "bCorrect" : "bWrong");
    badge.textContent = ok ? "Correct" : "Incorrect";

    // Enable reveal dropdown after submit
    reveal.disabled = false;
  });

  // Score (create/update)
  let scoreEl = document.getElementById("score");
  if (!scoreEl) {
    scoreEl = document.createElement("div");
    scoreEl.id = "score";
    scoreEl.className = "score";
    app.appendChild(scoreEl);
  }
  scoreEl.innerHTML = `Score: <span>${correct}/${QUESTIONS.length}</span>`;
});

document.getElementById("resetBtn").addEventListener("click", () => {
  // radios
  QUESTIONS.forEach(q => {
    document.querySelectorAll(`input[name="q_${q.id}"]`).forEach(r => r.checked = false);
    // badges
    const badge = document.getElementById(`badge-${q.id}`);
    badge.style.display = "none";
    // reveal controls
    const sel = document.getElementById(`reveal-${q.id}`);
    sel.value = "hidden";
    sel.disabled = true;
    const box = document.getElementById(`abox-${q.id}`);
    box.style.display = "none";
  });
  const scoreEl = document.getElementById("score");
  if (scoreEl) scoreEl.remove();
});
</script>
</body>
</html>
