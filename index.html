<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Point-on-Line Checker — Single File</title>
<style>
  :root{
    --bg:#0b0f14; --panel:#121821; --ink:#e6eef8; --muted:#9fb2c5; --accent:#4aa8ff; --ok:#27c46b; --no:#ff5563;
  }
  *{ box-sizing:border-box; }
  html,body{ height:100%; margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Arial; background:var(--bg); color:var(--ink); }
  .app{ max-width:900px; margin:0 auto; padding:28px; display:grid; gap:20px; }
  header h1{ margin:0; font-size:clamp(22px,4vw,34px); letter-spacing:.2px; }
  header p{ margin:.3rem 0 0 0; color:var(--muted); }

  .card{ background:linear-gradient(180deg,#121821, #0f1620); border:1px solid #1d2a3a; border-radius:16px; padding:18px; box-shadow:0 10px 30px rgba(0,0,0,.25); }
  .grid{ display:grid; gap:16px; }
  .pair{ display:grid; gap:6px; }

  .problem{
    display:grid; gap:10px; align-items:center;
    grid-template-columns: 1fr auto;
  }
  .math{ font-size:clamp(18px,3.3vw,28px); }
  .badge{ background:#0e2235; color:var(--accent); border:1px solid #1d3b58; padding:4px 10px; border-radius:999px; font-size:12px; }

  label{ font-weight:600; color:#d6e6f7; }
  select, button{
    width:100%; padding:12px 14px; background:#0e1620; color:var(--ink);
    border:1px solid #2a3a4c; border-radius:12px; outline:none; font-size:15px;
  }
  select:focus, button:focus{ border-color:var(--accent); box-shadow:0 0 0 3px rgba(74,168,255,.2); }
  button{ cursor:pointer; transition:.15s transform ease,.15s background ease,.15s border-color ease; }
  button:hover{ transform: translateY(-1px); }
  .primary{ background:#11253a; border-color:#214768; }
  .primary:hover{ background:#16304b; }
  .success{ background:#0f2b20; border-color:#1f6847; }
  .danger{ background:#2a1013; border-color:#6b2630; }
  .muted{ background:#0f1620; }
  .row{ display:grid; grid-template-columns: 1fr 1fr; gap:12px; }

  .result{ font-weight:700; padding:10px 14px; border-radius:12px; }
  .result.ok{ color:#b6ffd6; background:rgba(39,196,107,.12); border:1px solid rgba(39,196,107,.35); }
  .result.no{ color:#ffd2d7; background:rgba(255,85,99,.10); border:1px solid rgba(255,85,99,.35); }

  details{ background:#0e1620; border:1px solid #223348; border-radius:12px; padding:12px 14px; }
  details > summary{ cursor:pointer; font-weight:700; list-style:none; }
  details > summary::-webkit-details-marker{ display:none; }
  .explain{ color:var(--muted); margin-top:8px; line-height:1.55; white-space:pre-wrap; }

  .score{ display:flex; gap:10px; flex-wrap:wrap; }
  .chip{ background:#0e2235; border:1px solid #1d3b58; color:#d6e6f7; padding:6px 10px; border-radius:999px; font-size:13px; }
  .kpi{ font-weight:800; color:var(--accent); }

  footer{ color:var(--muted); font-size:12px; text-align:center; padding-top:8px; }
</style>
</head>
<body>
  <main class="app">
    <header>
      <h1>Point-on-Line Checker</h1>
      <p>Decide whether the given point lies on the given line. Pick your answer from the dropdown, then check. Use the “Show answer &amp; explanation” dropdown to reveal the correct result and working.</p>
    </header>

    <section class="card grid">
      <div class="problem">
        <div class="math" id="equation">y = mx + b</div>
        <div class="badge">Equation</div>
      </div>
      <div class="problem">
        <div class="math" id="point">(x, y)</div>
        <div class="badge">Point</div>
      </div>

      <div class="row">
        <div class="pair">
          <label for="userAnswer">Is the point on the line?</label>
          <select id="userAnswer" aria-label="Is the point on the line?">
            <option value="" selected>Choose your answer…</option>
            <option value="yes">Yes</option>
            <option value="no">No</option>
          </select>
        </div>

        <div class="pair">
          <label>&nbsp;</label>
          <button id="checkBtn" class="primary">Check Answer</button>
        </div>
      </div>

      <div id="feedback" class="result" style="display:none;"></div>

      <details id="reveal">
        <summary>Show answer &amp; explanation</summary>
        <div class="explain" id="explainText"></div>
      </details>

      <div class="row">
        <button id="newBtn" class="muted">New Question</button>
        <button id="resetBtn" class="danger">Reset Score</button>
      </div>

      <div class="score">
        <span class="chip">Correct: <span class="kpi" id="sc">0</span></span>
        <span class="chip">Incorrect: <span class="kpi" id="si">0</span></span>
        <span class="chip">Streak: <span class="kpi" id="ss">0</span></span>
      </div>
    </section>

    <footer>Tip: The test is whether the point’s y equals <code>m*x + b</code>.</footer>
  </main>

<script>
(function(){
  "use strict";

  // Score tracking in-memory (no storage to keep it simple)
  let scoreCorrect = 0, scoreIncorrect = 0, streak = 0;

  // Current problem state
  let m=0, b=0, px=0, py=0, isOn=false;

  // DOM elements
  const eqEl = document.getElementById('equation');
  const ptEl = document.getElementById('point');
  const ansSel = document.getElementById('userAnswer');
  const checkBtn = document.getElementById('checkBtn');
  const feedback = document.getElementById('feedback');
  const explainText = document.getElementById('explainText');
  const reveal = document.getElementById('reveal');
  const newBtn = document.getElementById('newBtn');
  const resetBtn = document.getElementById('resetBtn');
  const sc = document.getElementById('sc');
  const si = document.getElementById('si');
  const ss = document.getElementById('ss');

  function randInt(min, max){ // inclusive
    return Math.floor(Math.random()*(max-min+1))+min;
  }

  function coin(){ return Math.random() < 0.5; }

  function formatNumber(n){
    // Keep integers as-is; otherwise show with up to 2 decimals
    if (Number.isInteger(n)) return String(n);
    return Number(n.toFixed(2)).toString();
  }

  function newProblem(){
    // Random slope and intercept (avoid ultra tiny decimals)
    const slopes = [-5,-4,-3,-2,-1,-0.5,0,0.5,1,2,3,4,5];
    m = slopes[randInt(0, slopes.length-1)];
    b = randInt(-10, 10);

    // Decide whether to craft a point that lies on the line
    const makeOnLine = coin();
    if (makeOnLine){
      px = randInt(-8, 8);
      py = m*px + b;
      // If decimal py arises, keep it to 2dp
      if (!Number.isInteger(py)) py = Number(py.toFixed(2));
      isOn = true;
    } else {
      // Start with a true point then bump y by a small non-zero delta
      px = randInt(-8, 8);
      let trueY = m*px + b;
      if (!Number.isInteger(trueY)) trueY = Number(trueY.toFixed(2));
      const deltas = [-3,-2,-1,-0.5,0.5,1,2,3];
      const delta = deltas[randInt(0, deltas.length-1)];
      py = trueY + delta;
      if (!Number.isInteger(py)) py = Number(py.toFixed(2));
      isOn = false;
    }

    // Render
    eqEl.textContent = `y = ${formatNumber(m)}x + ${formatNumber(b)}`;
    ptEl.textContent = `(${formatNumber(px)}, ${formatNumber(py)})`;

    // Reset UI
    ansSel.value = "";
    feedback.style.display = "none";
    feedback.className = "result";
    feedback.textContent = "";
    reveal.open = false;
    explainText.textContent = "";
  }

  function updateScoreUI(){
    sc.textContent = scoreCorrect;
    si.textContent = scoreIncorrect;
    ss.textContent = streak;
  }

  function check(){
    const val = ansSel.value;
    if (!val){
      feedback.style.display = "block";
      feedback.className = "result no";
      feedback.textContent = "Pick an answer from the dropdown first.";
      return;
    }
    const userSaysOn = (val === "yes");
    const correct = userSaysOn === isOn;

    if (correct){
      feedback.style.display = "block";
      feedback.className = "result ok";
      feedback.textContent = "Correct!";
      scoreCorrect++; streak++;
    } else {
      feedback.style.display = "block";
      feedback.className = "result no";
      feedback.textContent = "Not quite. Check the explanation below.";
      scoreIncorrect++; streak = 0;
    }
    updateScoreUI();

    // Prepare explanation text
    // Test: does py === m*px + b (within small tolerance for decimals)?
    const lhs = py;
    const rhsRaw = m*px + b;
    const rhs = Number.isInteger(rhsRaw) ? rhsRaw : Number(rhsRaw.toFixed(2));
    const tolerance = 1e-9;
    const equality = Math.abs(lhs - rhs) < tolerance ? "equals" : "does not equal";
    const final = (Math.abs(lhs - rhs) < tolerance) ? "ON the line" : "NOT on the line";

    const steps =
`Line:  y = ${formatNumber(m)}x + ${formatNumber(b)}
Point: (${formatNumber(px)}, ${formatNumber(py)})

Plug in x = ${formatNumber(px)}:
  y = ${formatNumber(m)}·(${formatNumber(px)}) + ${formatNumber(b)} = ${formatNumber(rhs)}

Compare with point's y:
  ${formatNumber(lhs)} ${equality} ${formatNumber(rhs)} → the point is ${final}.`;

    explainText.textContent = steps;
  }

  function resetScore(){
    scoreCorrect = 0; scoreIncorrect = 0; streak = 0;
    updateScoreUI();
  }

  // Wire up
  checkBtn.addEventListener('click', check);
  newBtn.addEventListener('click', newProblem);
  resetBtn.addEventListener('click', resetScore);

  // First load
  updateScoreUI();
  newProblem();
})();
</script>
</body>
</html>
